{% extends "adminbase.html" %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/offer_coupons/manage_offer.css' %}">
{% endblock extra_css %}
{% block content %}
<a href="{% url 'offers_view' %}" class="btn-back">‚Üê Back to Offers</a>
<div class="offer-card">
    <div class="offer-header">
        <h2>Create New Offer</h2>
    </div>

    <form method="post" id="offerForm">
        {% csrf_token %}

        <!-- BASIC INFO -->
        <div class="form-grid">
            <div class="form-group">
                <label>Offer Name</label>
                <input type="text" name="offer_name" placeholder="Summer Collection Sale" required>
            </div>

            <div class="form-group">
                <label>Coupon Code</label>
                <input type="text" name="coupon_code" placeholder="SUMMER25" required>
            </div>

            <div class="form-group">
                <label>Discount Type</label>
                <select name="discount_type">
                    <option value="percentage">Percentage Discount</option>
                </select>
            </div>

            <div class="form-group">
                <label>Target Type</label>
                <select name="target_type" id="targetType">
                    <option value="all">All Products</option>
                    <option value="category">Specific Categories</option>
                    <option value="product">Individual Products</option>
                    <option value="order">Order Amount Threshold</option>
                </select>
            </div>
        </div>

        <!-- CATEGORY TARGET -->
        <div id="categorySection" class="conditional-section">
            <label>Select Categories</label>
            <div class="checkbox-grid">
                {% for category in categories %}
                <label>
                    <input type="checkbox" name="categories" value="{{ category.id }}">
                    {{ category.name }}
                </label>
                {% endfor %}
            </div>
        </div>

        <!-- PRODUCT TARGET -->
        <div id="productSection" class="conditional-section">
            <label>Select Products</label>
            <div class="checkbox-grid">
                {% for product in products %}
                <label>
                    <input type="checkbox" name="products" value="{{ product.id }}">
                    {{ product.name }}
                </label>
                {% endfor %}
            </div>
        </div>

        <!-- ORDER AMOUNT TARGET -->
        <div id="orderSection" class="conditional-section">
            <div class="form-group">
                <label>Minimum Order Amount</label>
                <input type="number" name="min_order" placeholder="0.00" step="0.01">
            </div>
        </div>

        <!-- DISCOUNT + DATES -->
        <div class="form-grid">
            <div class="form-group">
                <label>Discount Percentage</label>
                <div class="percent-input">
                    <input type="number" name="discount" placeholder="25" min="1" max="100" required>
                    <span>%</span>
                </div>
            </div>

            <div class="form-group">
                <label>Start Date</label>
                <input type="date" name="start_date" required>
            </div>

            <div class="form-group">
                <label>End Date</label>
                <input type="date" name="end_date" required>
            </div>
        </div>

        <!-- DESCRIPTION -->
        <div class="form-group full-width">
            <label>Description</label>
            <textarea name="description" rows="3" placeholder="Describe the offer details..."></textarea>
        </div>

        <!-- FEATURE -->
        <div class="checkbox-inline">
            <input type="checkbox" name="featured">
            <span>Feature on Homepage</span>
        </div>

        <!-- ACTIONS -->
        <div class="form-actions">
            <div class="action-right">
                <a href="{% url 'offers_view' %}" class="btn-cancel">Cancel</a>
                <button type="submit" class="btn-primary">Save Offer</button>
            </div>
        </div>

    </form>
</div>
{% endblock %}


{% block extraJs %}
<script src="{% static 'js/offer_coupons/manage_offer.js' %}"></script>
{% endblock %}
