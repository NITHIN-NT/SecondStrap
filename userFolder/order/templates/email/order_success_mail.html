{% extends "email/base_email.html" %}

{% block title %}Order Confirmation - #{{ order.order_id }}{% endblock %}

{% block content %}
<div class="success-badge">
    <img src="https://img.icons8.com/ios-filled/100/111111/checkmark--v1.png" alt="Success">
</div>

<h2 style="margin: 0 0 10px 0; color: #111111; font-size: 24px; font-weight: 700; text-align: center;">Order Placed Successfully</h2>
<p style="margin: 0 0 30px 0; font-size: 16px; color: #555555; line-height: 1.5; text-align: center;">
    Thank you for choosing SecondStrap. We have received your order and are preparing it for shipment.
</p>

<div style="text-align: center; margin-bottom: 30px;">
    <p style="margin: 0; font-size: 14px; color: #111111;"><strong>Order ID:</strong> #{{ order.order_id }}</p>
    <p style="margin: 5px 0 0 0; font-size: 14px; color: #777777;">Date: {{ order.created_at|date:"F d, Y" }}</p>
</div>

<table class="order-table" cellpadding="0" cellspacing="0">
    <thead>
        <tr>
            <th>Item</th>
            <th style="text-align: right;">Price</th>
        </tr>
    </thead>
    <tbody>
        {% for item in order.items.all %}
        <tr>
            <td>
                <span style="font-weight: 700; color: #111111;">{{ item.product_name }}</span><br>
                <span style="font-size: 13px; color: #777777;">Size: {{ item.variant.size }} | Qty: {{ item.quantity }}</span>
            </td>
            <td style="text-align: right; color: #111111;">â‚¹ {{ item.get_total_price }}</td>
        </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <tr>
            <td style="padding-top: 20px; font-size: 16px; color: #555555;">Subtotal</td>
            <td style="padding-top: 20px; text-align: right; font-size: 16px; color: #555555;">â‚¹ {{ order.total_price }}</td>
        </tr>
        {% if order.discount_amount > 0 %}
        <tr>
            <td style="padding-top: 10px; font-size: 16px; color: #059669; font-weight: 600;">Discount</td>
            <td style="padding-top: 10px; text-align: right; font-size: 16px; color: #059669; font-weight: 600;">- â‚¹ {{ order.discount_amount }}</td>
        </tr>
        {% endif %}
        {% if order.wallet_deduction > 0 %}
        <tr>
            <td style="padding-top: 10px; font-size: 16px; color: #059669; font-weight: 600;">Wallet Deduction</td>
            <td style="padding-top: 10px; text-align: right; font-size: 16px; color: #059669; font-weight: 600;">- â‚¹ {{ order.wallet_deduction }}</td>
        </tr>
        {% endif %}
        <tr>
            <td class="order-total" style="border: none;">Total</td>
            <td class="order-total" style="text-align: right; border: none;">â‚¹ {{ order.total_paid }}</td>
        </tr>
        <tr>
            <td style="padding-bottom: 20px; font-size: 14px; color: #777;">Balance Paid/Cod</td>
            <td style="padding-bottom: 20px; text-align: right; font-size: 14px; color: #777;">â‚¹ {{ order.final_price }}</td>
        </tr>
    </tfoot>
</table>

{% if order.discount_amount > 0 %}
<div class="savings-banner">
    ðŸŽ‰ You saved â‚¹{{ order.discount_amount }} on this order!
</div>
{% endif %}

<div class="info-card">
    <h3>Shipping Address</h3>
    <p>
        <strong>{{ order.user.get_full_name }}</strong><br>
        {{ order.shipping_address_line_1 }}<br>
        {% if order.shipping_address_line_2 %}
            {{ order.shipping_address_line_2 }}<br>
        {% endif %}
        {{ order.shipping_city }} - {{ order.shipping_pincode }}<br>
        {{ order.shipping_state }}<br>
        <strong>Phone:</strong> {{ order.shipping_phone }}
    </p>
</div>

<div style="margin-top: 40px; text-align: center;">
    <a href="#" class="button">Track Your Order</a>
</div>
{% endblock %}